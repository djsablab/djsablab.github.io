document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre code').forEach((block) => {
      hljs.highlightElement(block);
    });
  });

/// Allows us to toggle the sidebar visibility.
var toggleState = 0;
document.getElementById("mySidenav").style.width = "0%";

function openNav() {
    document.getElementById("mySidenav").style.width = "100%";
  }
  
  function closeNav() {
    document.getElementById("mySidenav").style.width = "0%";
  }


  function toggleNav() {
      toggleState = toggleState + 1
      if (toggleState == 2) {
          closeNav();
          toggleState = 0;
      } else {
          openNav();
      }
  }

  window.onclick = function(event) {
  if (!event.target.matches('.mini-nav')) {
      closeNav();
      toggleState = 0;
  }
}
document.addEventListener('touchstart', handleTouchStart, false);        
document.addEventListener('touchmove', handleTouchMove, false);

var xDown = null;                                                        
var yDown = null;

function getTouches(evt) {
  return evt.touches ||             // browser API
         evt.originalEvent.touches; // jQuery
}                                                     
                                                                         
function handleTouchStart(evt) {
    const firstTouch = getTouches(evt)[0];                                      
    xDown = firstTouch.clientX;                                      
    yDown = firstTouch.clientY;                                      
};                                                
                                                                         
function handleTouchMove(evt) {
    if ( ! xDown || ! yDown ) {
        return;
    }

    var xUp = evt.touches[0].clientX;                                    
    var yUp = evt.touches[0].clientY;

    var xDiff = xDown - xUp;
    var yDiff = yDown - yUp;
                                                                         
    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/
        if ( xDiff > 0 ) {
          // Deprecated code due to the bugs on mobile devices.
          // It used to allow to open the sidebar by using motions from user.
            //openNav();
            // toggleState = 1;
        } else {
         // closeNav();
          // toggleState = 0;
        }                       
    } else {
        if ( yDiff > 0 ) {
            /* down swipe */ 
        } else { 
            /* up swipe */
        }                                                                 
    }
    /* reset values */
    xDown = null;
    yDown = null;                                             
};

const themeSwitch = document.querySelector('#theme-switch');
themeSwitch.addEventListener('change', () => {
    if(themeSwitch.checked) {
        document.documentElement.setAttribute('data-theme', 'light');
        document.cookie = "darkmode=true; expires=Thu, 14 Jan 2038 23:59:00 UTC; path=/";
    } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        document.cookie = "darkmode=false; expires=Thu, 14 Jan 2038 23:59:00 UTC ;path=/";
    }
});

function getCookie(cname) {
    let name = cname + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let ca = decodedCookie.split(';');
    for(let i = 0; i <ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }

  function checkCookie() {
    let modee = getCookie("darkmode");
    if (modee == "true") {
         document.documentElement.setAttribute('data-theme', 'light');
        themeSwitch.checked =true;
    } else {
       
        document.documentElement.setAttribute('data-theme', 'dark');
        themeSwitch.checked =false;
    }
  }
  checkCookie();